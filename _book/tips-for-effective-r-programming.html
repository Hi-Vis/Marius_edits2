<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Section 2 Tips for effective R programming | Matilda Intro to R Workshop</title>
  <meta name="description" content="An accessible introduction to R that doesn’t assume programming experience" />
  <meta name="generator" content="bookdown 0.28 and GitBook 2.6.7" />

  <meta property="og:title" content="Section 2 Tips for effective R programming | Matilda Intro to R Workshop" />
  <meta property="og:type" content="book" />
  <meta property="og:image" content="https://bookdown.org/rachel_visontay/Rad/Images/Cover.png" />
  <meta property="og:description" content="An accessible introduction to R that doesn’t assume programming experience" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Section 2 Tips for effective R programming | Matilda Intro to R Workshop" />
  
  <meta name="twitter:description" content="An accessible introduction to R that doesn’t assume programming experience" />
  <meta name="twitter:image" content="https://bookdown.org/rachel_visontay/Rad/Images/Cover.png" />

<meta name="author" content="Marius Mather (with tweaks by Rachel Visontay)" />


<meta name="date" content="2022-08-26" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  <link rel="shortcut icon" href="Images/rad_logo_r.png" type="image/x-icon" />
<link rel="prev" href="installing.html"/>
<link rel="next" href="the-basics-of-r.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome</a></li>
<li class="chapter" data-level="1" data-path="installing.html"><a href="installing.html"><i class="fa fa-check"></i><b>1</b> Getting started with R</a>
<ul>
<li class="chapter" data-level="1.1" data-path="installing.html"><a href="installing.html#installing-r"><i class="fa fa-check"></i><b>1.1</b> Installing R</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="installing.html"><a href="installing.html#windows-instructions"><i class="fa fa-check"></i><b>1.1.1</b> Windows instructions</a></li>
<li class="chapter" data-level="1.1.2" data-path="installing.html"><a href="installing.html#mac-os-x-instructions"><i class="fa fa-check"></i><b>1.1.2</b> Mac OS X instructions</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="installing.html"><a href="installing.html#installing-rstudio"><i class="fa fa-check"></i><b>1.2</b> Installing RStudio</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="installing.html"><a href="installing.html#mac-os-x-notes"><i class="fa fa-check"></i><b>1.2.1</b> Mac OS X notes</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="installing.html"><a href="installing.html#running-rstudio"><i class="fa fa-check"></i><b>1.3</b> Running RStudio</a></li>
<li class="chapter" data-level="1.4" data-path="installing.html"><a href="installing.html#installing-your-first-packages"><i class="fa fa-check"></i><b>1.4</b> Installing your first packages</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="tips-for-effective-r-programming.html"><a href="tips-for-effective-r-programming.html"><i class="fa fa-check"></i><b>2</b> Tips for effective R programming</a>
<ul>
<li class="chapter" data-level="2.1" data-path="tips-for-effective-r-programming.html"><a href="tips-for-effective-r-programming.html#use-rstudios-projects-feature"><i class="fa fa-check"></i><b>2.1</b> Use RStudio’s “projects” feature</a></li>
<li class="chapter" data-level="2.2" data-path="tips-for-effective-r-programming.html"><a href="tips-for-effective-r-programming.html#using-scripts"><i class="fa fa-check"></i><b>2.2</b> Using scripts</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="tips-for-effective-r-programming.html"><a href="tips-for-effective-r-programming.html#script-layout"><i class="fa fa-check"></i><b>2.2.1</b> Script layout</a></li>
<li class="chapter" data-level="2.2.2" data-path="tips-for-effective-r-programming.html"><a href="tips-for-effective-r-programming.html#a-tip-for-better-reproducibility"><i class="fa fa-check"></i><b>2.2.2</b> A tip for better reproducibility</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="tips-for-effective-r-programming.html"><a href="tips-for-effective-r-programming.html#long-or-wide-data"><i class="fa fa-check"></i><b>2.3</b> Long or wide data</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="tips-for-effective-r-programming.html"><a href="tips-for-effective-r-programming.html#wide-to-long"><i class="fa fa-check"></i><b>2.3.1</b> Going from wide to long</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="tips-for-effective-r-programming.html"><a href="tips-for-effective-r-programming.html#writing-readable-code"><i class="fa fa-check"></i><b>2.4</b> Writing readable code</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="tips-for-effective-r-programming.html"><a href="tips-for-effective-r-programming.html#basic-formatting-tips"><i class="fa fa-check"></i><b>2.4.1</b> Basic formatting tips</a></li>
<li class="chapter" data-level="2.4.2" data-path="tips-for-effective-r-programming.html"><a href="tips-for-effective-r-programming.html#keeping-a-consistent-style"><i class="fa fa-check"></i><b>2.4.2</b> Keeping a consistent style</a></li>
<li class="chapter" data-level="2.4.3" data-path="tips-for-effective-r-programming.html"><a href="tips-for-effective-r-programming.html#writing-comments"><i class="fa fa-check"></i><b>2.4.3</b> Writing comments</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="tips-for-effective-r-programming.html"><a href="tips-for-effective-r-programming.html#dont-panic-dealing-with-spss-withdrawal"><i class="fa fa-check"></i><b>2.5</b> Don’t panic: dealing with SPSS withdrawal</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="tips-for-effective-r-programming.html"><a href="tips-for-effective-r-programming.html#rstudio-has-a-data-viewer"><i class="fa fa-check"></i><b>2.5.1</b> RStudio has a data viewer</a></li>
<li class="chapter" data-level="2.5.2" data-path="tips-for-effective-r-programming.html"><a href="tips-for-effective-r-programming.html#r-can-read-spss-files"><i class="fa fa-check"></i><b>2.5.2</b> R can read SPSS files</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="tips-for-effective-r-programming.html"><a href="tips-for-effective-r-programming.html#here-be-dragons-the-bad-parts-of-r"><i class="fa fa-check"></i><b>2.6</b> Here be dragons: the bad parts of R</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="the-basics-of-r.html"><a href="the-basics-of-r.html"><i class="fa fa-check"></i><b>3</b> The Basics of R</a>
<ul>
<li class="chapter" data-level="3.1" data-path="the-basics-of-r.html"><a href="the-basics-of-r.html#basic-data-types"><i class="fa fa-check"></i><b>3.1</b> Basic data types</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="the-basics-of-r.html"><a href="the-basics-of-r.html#numbers"><i class="fa fa-check"></i><b>3.1.1</b> Numbers</a></li>
<li class="chapter" data-level="3.1.2" data-path="the-basics-of-r.html"><a href="the-basics-of-r.html#characters-text"><i class="fa fa-check"></i><b>3.1.2</b> Characters (text)</a></li>
<li class="chapter" data-level="3.1.3" data-path="the-basics-of-r.html"><a href="the-basics-of-r.html#logical-truefalse"><i class="fa fa-check"></i><b>3.1.3</b> Logical (True/False)</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="the-basics-of-r.html"><a href="the-basics-of-r.html#converting-between-types"><i class="fa fa-check"></i><b>3.2</b> Converting between types</a></li>
<li class="chapter" data-level="3.3" data-path="the-basics-of-r.html"><a href="the-basics-of-r.html#variables-storing-results"><i class="fa fa-check"></i><b>3.3</b> Variables: Storing Results</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="the-basics-of-r.html"><a href="the-basics-of-r.html#copying-variables"><i class="fa fa-check"></i><b>3.3.1</b> Copying Variables</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="the-basics-of-r.html"><a href="the-basics-of-r.html#vectors"><i class="fa fa-check"></i><b>3.4</b> Vectors</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="the-basics-of-r.html"><a href="the-basics-of-r.html#calculating-with-vectors"><i class="fa fa-check"></i><b>3.4.1</b> Calculating with vectors</a></li>
<li class="chapter" data-level="3.4.2" data-path="the-basics-of-r.html"><a href="the-basics-of-r.html#missing-values"><i class="fa fa-check"></i><b>3.4.2</b> Missing values</a></li>
<li class="chapter" data-level="3.4.3" data-path="the-basics-of-r.html"><a href="the-basics-of-r.html#indexing-accessing-parts-of-vectors"><i class="fa fa-check"></i><b>3.4.3</b> Indexing: accessing parts of vectors</a></li>
<li class="chapter" data-level="3.4.4" data-path="the-basics-of-r.html"><a href="the-basics-of-r.html#logical-indexing-filtering-your-data-based-on-conditions"><i class="fa fa-check"></i><b>3.4.4</b> Logical indexing: filtering your data based on conditions</a></li>
<li class="chapter" data-level="3.4.5" data-path="the-basics-of-r.html"><a href="the-basics-of-r.html#changing-vectors"><i class="fa fa-check"></i><b>3.4.5</b> Changing vectors</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="dataframes-and-more.html"><a href="dataframes-and-more.html"><i class="fa fa-check"></i><b>4</b> Dataframes and More</a>
<ul>
<li class="chapter" data-level="4.1" data-path="dataframes-and-more.html"><a href="dataframes-and-more.html#factors-categorical-data"><i class="fa fa-check"></i><b>4.1</b> Factors (categorical data)</a></li>
<li class="chapter" data-level="4.2" data-path="dataframes-and-more.html"><a href="dataframes-and-more.html#lists"><i class="fa fa-check"></i><b>4.2</b> Lists</a></li>
<li class="chapter" data-level="4.3" data-path="dataframes-and-more.html"><a href="dataframes-and-more.html#dataframes"><i class="fa fa-check"></i><b>4.3</b> Dataframes!</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="dataframes-and-more.html"><a href="dataframes-and-more.html#accessing-parts-of-dataframes"><i class="fa fa-check"></i><b>4.3.1</b> Accessing parts of dataframes</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="functions.html"><a href="functions.html"><i class="fa fa-check"></i><b>5</b> Functions</a>
<ul>
<li class="chapter" data-level="5.1" data-path="functions.html"><a href="functions.html#arguments"><i class="fa fa-check"></i><b>5.1</b> Arguments</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="functions.html"><a href="functions.html#positional-or-named-arguments"><i class="fa fa-check"></i><b>5.1.1</b> Positional or Named Arguments</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="functions.html"><a href="functions.html#writing-your-own-functions"><i class="fa fa-check"></i><b>5.2</b> Writing your own functions</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="an-example-analysis.html"><a href="an-example-analysis.html"><i class="fa fa-check"></i><b>6</b> An Example Analysis</a>
<ul>
<li class="chapter" data-level="6.1" data-path="an-example-analysis.html"><a href="an-example-analysis.html#loading-libraries"><i class="fa fa-check"></i><b>6.1</b> Loading libraries</a></li>
<li class="chapter" data-level="6.2" data-path="an-example-analysis.html"><a href="an-example-analysis.html#loading-data"><i class="fa fa-check"></i><b>6.2</b> Loading data</a></li>
<li class="chapter" data-level="6.3" data-path="an-example-analysis.html"><a href="an-example-analysis.html#recoding"><i class="fa fa-check"></i><b>6.3</b> Recoding</a></li>
<li class="chapter" data-level="6.4" data-path="an-example-analysis.html"><a href="an-example-analysis.html#descriptive-statistics"><i class="fa fa-check"></i><b>6.4</b> Descriptive Statistics</a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="an-example-analysis.html"><a href="an-example-analysis.html#quick-data-summary"><i class="fa fa-check"></i><b>6.4.1</b> Quick data summary</a></li>
<li class="chapter" data-level="6.4.2" data-path="an-example-analysis.html"><a href="an-example-analysis.html#frequency-tables"><i class="fa fa-check"></i><b>6.4.2</b> Frequency tables</a></li>
<li class="chapter" data-level="6.4.3" data-path="an-example-analysis.html"><a href="an-example-analysis.html#histograms-distributions-of-continuous-variables"><i class="fa fa-check"></i><b>6.4.3</b> Histograms: distributions of continuous variables</a></li>
<li class="chapter" data-level="6.4.4" data-path="an-example-analysis.html"><a href="an-example-analysis.html#scatterplots-relationship-between-two-continuous-variables"><i class="fa fa-check"></i><b>6.4.4</b> Scatterplots: relationship between two continuous variables</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="an-example-analysis.html"><a href="an-example-analysis.html#analysis"><i class="fa fa-check"></i><b>6.5</b> Analysis</a>
<ul>
<li class="chapter" data-level="6.5.1" data-path="an-example-analysis.html"><a href="an-example-analysis.html#t-test"><i class="fa fa-check"></i><b>6.5.1</b> T-test</a></li>
<li class="chapter" data-level="6.5.2" data-path="an-example-analysis.html"><a href="an-example-analysis.html#formulas-a-simple-mini-language-for-expressing-models"><i class="fa fa-check"></i><b>6.5.2</b> Formulas: a simple mini-language for expressing models</a></li>
<li class="chapter" data-level="6.5.3" data-path="an-example-analysis.html"><a href="an-example-analysis.html#regression"><i class="fa fa-check"></i><b>6.5.3</b> Regression</a></li>
</ul></li>
<li class="chapter" data-level="6.6" data-path="an-example-analysis.html"><a href="an-example-analysis.html#pointless-flashy-nonsense"><i class="fa fa-check"></i><b>6.6</b> Pointless flashy nonsense</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="tidyverse.html"><a href="tidyverse.html"><i class="fa fa-check"></i><b>7</b> Easier analysis with the tidyverse</a>
<ul>
<li class="chapter" data-level="7.1" data-path="tidyverse.html"><a href="tidyverse.html#introduction-to-the-tidyverse"><i class="fa fa-check"></i><b>7.1</b> Introduction to the tidyverse</a></li>
<li class="chapter" data-level="7.2" data-path="tidyverse.html"><a href="tidyverse.html#dplyr-turning-complex-analyses-into-simple-steps"><i class="fa fa-check"></i><b>7.2</b> <code>dplyr</code>: Turning complex analyses into simple steps</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="tidyverse.html"><a href="tidyverse.html#bending-the-rules-non-standard-evaluation"><i class="fa fa-check"></i><b>7.2.1</b> Bending the rules: Non-standard evaluation</a></li>
<li class="chapter" data-level="7.2.2" data-path="tidyverse.html"><a href="tidyverse.html#pipes"><i class="fa fa-check"></i><b>7.2.2</b> Pipes: <code>%&gt;%</code></a></li>
<li class="chapter" data-level="7.2.3" data-path="tidyverse.html"><a href="tidyverse.html#common-tasks-with-dplyr"><i class="fa fa-check"></i><b>7.2.3</b> Common tasks with <code>dplyr</code></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="better-plots-with-ggplot2.html"><a href="better-plots-with-ggplot2.html"><i class="fa fa-check"></i><b>8</b> Better plots with <code>ggplot2</code></a>
<ul>
<li class="chapter" data-level="8.1" data-path="better-plots-with-ggplot2.html"><a href="better-plots-with-ggplot2.html#using-ggplot2-properly"><i class="fa fa-check"></i><b>8.1</b> Using <code>ggplot2</code> properly</a></li>
<li class="chapter" data-level="8.2" data-path="better-plots-with-ggplot2.html"><a href="better-plots-with-ggplot2.html#mapping-aesthetics"><i class="fa fa-check"></i><b>8.2</b> Mapping aesthetics</a></li>
<li class="chapter" data-level="8.3" data-path="better-plots-with-ggplot2.html"><a href="better-plots-with-ggplot2.html#geoms-representing-the-data-with-different-components"><i class="fa fa-check"></i><b>8.3</b> geoms: representing the data with different components</a></li>
<li class="chapter" data-level="8.4" data-path="better-plots-with-ggplot2.html"><a href="better-plots-with-ggplot2.html#combining-geoms"><i class="fa fa-check"></i><b>8.4</b> Combining geoms</a></li>
<li class="chapter" data-level="8.5" data-path="better-plots-with-ggplot2.html"><a href="better-plots-with-ggplot2.html#scales-and-themes-changing-the-look-of-your-plot"><i class="fa fa-check"></i><b>8.5</b> Scales and themes: changing the look of your plot</a>
<ul>
<li class="chapter" data-level="8.5.1" data-path="better-plots-with-ggplot2.html"><a href="better-plots-with-ggplot2.html#scales"><i class="fa fa-check"></i><b>8.5.1</b> Scales</a></li>
<li class="chapter" data-level="8.5.2" data-path="better-plots-with-ggplot2.html"><a href="better-plots-with-ggplot2.html#themes"><i class="fa fa-check"></i><b>8.5.2</b> Themes</a></li>
<li class="chapter" data-level="8.5.3" data-path="better-plots-with-ggplot2.html"><a href="better-plots-with-ggplot2.html#finding-extra-scales-and-themes"><i class="fa fa-check"></i><b>8.5.3</b> Finding extra scales and themes</a></li>
</ul></li>
<li class="chapter" data-level="8.6" data-path="better-plots-with-ggplot2.html"><a href="better-plots-with-ggplot2.html#other-packages-use-ggplot2-too"><i class="fa fa-check"></i><b>8.6</b> Other packages use <code>ggplot2</code> too</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="real-world-data-example.html"><a href="real-world-data-example.html"><i class="fa fa-check"></i><b>9</b> Real world data example</a>
<ul>
<li class="chapter" data-level="9.1" data-path="real-world-data-example.html"><a href="real-world-data-example.html#data-overview"><i class="fa fa-check"></i><b>9.1</b> Data overview</a>
<ul>
<li class="chapter" data-level="9.1.1" data-path="real-world-data-example.html"><a href="real-world-data-example.html#surps-overview"><i class="fa fa-check"></i><b>9.1.1</b> SURPS overview</a></li>
<li class="chapter" data-level="9.1.2" data-path="real-world-data-example.html"><a href="real-world-data-example.html#bsi-overview"><i class="fa fa-check"></i><b>9.1.2</b> BSI overview</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="real-world-data-example.html"><a href="real-world-data-example.html#basic-setup"><i class="fa fa-check"></i><b>9.2</b> Basic setup</a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="real-world-data-example.html"><a href="real-world-data-example.html#load-libraries"><i class="fa fa-check"></i><b>9.2.1</b> Load libraries</a></li>
<li class="chapter" data-level="9.2.2" data-path="real-world-data-example.html"><a href="real-world-data-example.html#load-the-data"><i class="fa fa-check"></i><b>9.2.2</b> Load the data</a></li>
<li class="chapter" data-level="9.2.3" data-path="real-world-data-example.html"><a href="real-world-data-example.html#solve-major-issues"><i class="fa fa-check"></i><b>9.2.3</b> Solve major issues</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="real-world-data-example.html"><a href="real-world-data-example.html#recoding-and-scoring"><i class="fa fa-check"></i><b>9.3</b> Recoding and scoring</a>
<ul>
<li class="chapter" data-level="9.3.1" data-path="real-world-data-example.html"><a href="real-world-data-example.html#scoring-surps-the-easy-way"><i class="fa fa-check"></i><b>9.3.1</b> Scoring SURPS the easy way</a></li>
<li class="chapter" data-level="9.3.2" data-path="real-world-data-example.html"><a href="real-world-data-example.html#scoring-surps-the-harder-way"><i class="fa fa-check"></i><b>9.3.2</b> Scoring SURPS the harder way</a></li>
<li class="chapter" data-level="9.3.3" data-path="real-world-data-example.html"><a href="real-world-data-example.html#scoring-the-bsi-scales"><i class="fa fa-check"></i><b>9.3.3</b> Scoring the BSI scales</a></li>
<li class="chapter" data-level="9.3.4" data-path="real-world-data-example.html"><a href="real-world-data-example.html#recoding-1"><i class="fa fa-check"></i><b>9.3.4</b> Recoding</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="real-world-data-example.html"><a href="real-world-data-example.html#saving-data"><i class="fa fa-check"></i><b>9.4</b> Saving data</a></li>
<li class="chapter" data-level="9.5" data-path="real-world-data-example.html"><a href="real-world-data-example.html#descriptive-statistics-1"><i class="fa fa-check"></i><b>9.5</b> Descriptive statistics</a>
<ul>
<li class="chapter" data-level="9.5.1" data-path="real-world-data-example.html"><a href="real-world-data-example.html#correlations-between-variables"><i class="fa fa-check"></i><b>9.5.1</b> Correlations between variables</a></li>
<li class="chapter" data-level="9.5.2" data-path="real-world-data-example.html"><a href="real-world-data-example.html#contingency-tables-for-categorical-data"><i class="fa fa-check"></i><b>9.5.2</b> Contingency tables for categorical data</a></li>
<li class="chapter" data-level="9.5.3" data-path="real-world-data-example.html"><a href="real-world-data-example.html#understanding-complex-data"><i class="fa fa-check"></i><b>9.5.3</b> Understanding complex data</a></li>
</ul></li>
<li class="chapter" data-level="9.6" data-path="real-world-data-example.html"><a href="real-world-data-example.html#analysis-1"><i class="fa fa-check"></i><b>9.6</b> Analysis</a>
<ul>
<li class="chapter" data-level="9.6.1" data-path="real-world-data-example.html"><a href="real-world-data-example.html#simple-but-wrong-logistic-regression"><i class="fa fa-check"></i><b>9.6.1</b> Simple but wrong: Logistic regression</a></li>
<li class="chapter" data-level="9.6.2" data-path="real-world-data-example.html"><a href="real-world-data-example.html#more-complex-modelling-mixed-models-with-lme4"><i class="fa fa-check"></i><b>9.6.2</b> More complex modelling: Mixed models with <code>lme4</code></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="learning-moregetting-help.html"><a href="learning-moregetting-help.html"><i class="fa fa-check"></i>Learning more/Getting help</a>
<ul>
<li class="chapter" data-level="" data-path="learning-moregetting-help.html"><a href="learning-moregetting-help.html#more-coursesbooks"><i class="fa fa-check"></i>More courses/books</a></li>
<li class="chapter" data-level="" data-path="learning-moregetting-help.html"><a href="learning-moregetting-help.html#checking-out-the-r-community"><i class="fa fa-check"></i>Checking out the R community</a></li>
<li class="chapter" data-level="" data-path="learning-moregetting-help.html"><a href="learning-moregetting-help.html#getting-help"><i class="fa fa-check"></i>Getting help</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="why-r-is-good.html"><a href="why-r-is-good.html"><i class="fa fa-check"></i>Why R is Good</a>
<ul>
<li class="chapter" data-level="" data-path="why-r-is-good.html"><a href="why-r-is-good.html#r-is-a-language"><i class="fa fa-check"></i>R is a Language</a></li>
<li class="chapter" data-level="" data-path="why-r-is-good.html"><a href="why-r-is-good.html#r-is-a-programming-language"><i class="fa fa-check"></i>R is a programming language</a></li>
<li class="chapter" data-level="" data-path="why-r-is-good.html"><a href="why-r-is-good.html#r-has-an-active-community"><i class="fa fa-check"></i>R has an active community</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="referencesresources-used.html"><a href="referencesresources-used.html"><i class="fa fa-check"></i>References/Resources used</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Matilda Intro to R Workshop</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="tips-for-effective-r-programming" class="section level1 hasAnchor" number="2">
<h1><span class="header-section-number">Section 2</span> Tips for effective R programming<a href="tips-for-effective-r-programming.html#tips-for-effective-r-programming" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>Before getting into actual R code, we’ll start with a few notes
about how to use it most effectively. Bad coding habits can
make your R code difficult to read and understand, so hopefully
these tips will ensure you have good habits right from the start.</p>
<div id="use-rstudios-projects-feature" class="section level2 hasAnchor" number="2.1">
<h2><span class="header-section-number">2.1</span> Use RStudio’s “projects” feature<a href="tips-for-effective-r-programming.html#use-rstudios-projects-feature" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Every project you do in R should be set up in its own folder, through
RStudio’s “projects” feature. To start a fresh project, go to
<strong>File -&gt; New project</strong> and create a new folder. Reopen the project
in RStudio whenever you want to work with it.</p>
<p>When sending your work to other people, you can send them the whole
folder and know that they’ll have access to all the required files and
scripts.</p>
<p>One of the main benefits is that this sets R’s “working directory” to
the project folder by default. Any files you load or save can
just be referenced relative to that folder, so instead of:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="tips-for-effective-r-programming.html#cb5-1" aria-hidden="true" tabindex="-1"></a>data <span class="ot">=</span> haven<span class="sc">::</span><span class="fu">read_spss</span>(<span class="st">&quot;R:/Project/2013/Analyses/Regressions/Data/Raw.sav&quot;</span>)</span></code></pre></div>
<p>You can just do:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="tips-for-effective-r-programming.html#cb6-1" aria-hidden="true" tabindex="-1"></a>data <span class="ot">=</span> haven<span class="sc">::</span><span class="fu">read_spss</span>(<span class="st">&quot;Data/Raw.sav&quot;</span>)</span></code></pre></div>
<p>This will also work for anyone you send the project to, so you don’t
have to worry that the file is in a different location on their machine.</p>
</div>
<div id="using-scripts" class="section level2 hasAnchor" number="2.2">
<h2><span class="header-section-number">2.2</span> Using scripts<a href="tips-for-effective-r-programming.html#using-scripts" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>It’s best to put every step of your data cleaning and analysis
in a script that you save, rather than making temporary changes
in the console.</p>
<p>Ideally, this will mean that you (or anyone else) can run the script
from top to bottom, and get the same results every time, i.e. they’re
<strong>reproducible</strong>.</p>
<div id="script-layout" class="section level3 hasAnchor" number="2.2.1">
<h3><span class="header-section-number">2.2.1</span> Script layout<a href="tips-for-effective-r-programming.html#script-layout" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Most R scripts I write have the same basic layout:</p>
<ol style="list-style-type: decimal">
<li>Loading the libraries I’m using</li>
<li>Loading the data</li>
<li>Changing or analysing the data</li>
<li>Saving the results or the recoded data file</li>
</ol>
<p>For a larger project, it’s good to create multiple different scripts for
each stage, e.g. one file to recode the data, one to run the analyses.</p>
<p>When saving the recoded data, it’s best to save it as a different file -
you keep the raw data, and you can recreate the recoded data
exactly by rerunning your script.</p>
<div class="note">
<p>
R won’t overwrite your data files when you change your data, unless you specifically ask it to. When you load a file into R, it lives in R’s ‘short-term memory,’ and doesn’t maintain any connection to the file on disk. It’s only when you explicitly save to a file that those changes become permanent.
</p>
</div>
</div>
<div id="a-tip-for-better-reproducibility" class="section level3 hasAnchor" number="2.2.2">
<h3><span class="header-section-number">2.2.2</span> A tip for better reproducibility<a href="tips-for-effective-r-programming.html#a-tip-for-better-reproducibility" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>By default, RStudio will save your current “workspace” when you
quit. While convenient, this can mean that you make one-off changes
to your data and forget to save that command in your script. Starting
with a fresh session every time you open RStudio means you’ll learn
to keep every step of your analysis in your script, and you’ll
know that you can get back to where you were by rerunning the script.</p>
<p>To disable the default setting, go to <strong>Tools -&gt; Global options..</strong>,
and in the <strong>General</strong> tab, and:</p>
<ul>
<li>Uncheck “Restore .RData”</li>
<li>Set “Save workspace on exit” to “Never”</li>
</ul>
<div class="figure">
<img src="Images/WorkspaceSettings.png" alt="" />
<p class="caption">RStudio’s “save workspace” settings</p>
</div>
</div>
</div>
<div id="long-or-wide-data" class="section level2 hasAnchor" number="2.3">
<h2><span class="header-section-number">2.3</span> Long or wide data<a href="tips-for-effective-r-programming.html#long-or-wide-data" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>R works better with <strong>long</strong> data, whereas SPSS generally works
better with <strong>wide</strong> data. Roughly speaking, <strong>long</strong> data means:</p>
<ul>
<li>There is one “observation” of each participant/subject per row - e.g. one
survey, one session</li>
<li>All the measurements of the same type are in one column - so all the
K6 scores, from multiple surveys, would be in a single <code>K6</code> column,
with an additional <code>Time</code> or <code>Survey</code> column that identifies which
survey they come from.</li>
</ul>
<p>Example long data:</p>
<table>
<thead>
<tr class="header">
<th align="right">ID</th>
<th align="right">Survey</th>
<th align="left">Drinking</th>
<th align="right">AnxietyTotal</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="right">1</td>
<td align="left">No</td>
<td align="right">6</td>
</tr>
<tr class="even">
<td align="right">1</td>
<td align="right">2</td>
<td align="left">Yes</td>
<td align="right">8</td>
</tr>
<tr class="odd">
<td align="right">2</td>
<td align="right">1</td>
<td align="left">No</td>
<td align="right">5</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="right">2</td>
<td align="left">No</td>
<td align="right">7</td>
</tr>
</tbody>
</table>
<p>Example wide data:</p>
<table>
<thead>
<tr class="header">
<th align="right">ID</th>
<th align="left">Drinking_T1</th>
<th align="left">Drinking_T2</th>
<th align="right">AnxietyTotal_T1</th>
<th align="right">AnxietyTotal_T2</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="left">No</td>
<td align="left">Yes</td>
<td align="right">6</td>
<td align="right">8</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="left">No</td>
<td align="left">No</td>
<td align="right">5</td>
<td align="right">7</td>
</tr>
</tbody>
</table>
<div id="wide-to-long" class="section level3 hasAnchor" number="2.3.1">
<h3><span class="header-section-number">2.3.1</span> Going from wide to long<a href="tips-for-effective-r-programming.html#wide-to-long" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>If your data is currently in wide format, you may have to <strong>reshape</strong>
it before working with it in R. The new <code>pivot_longer</code> and <code>pivot_wider</code>
functions from the <code>tidyr</code> package are good for <a href="https://tidyr.tidyverse.org/dev/articles/pivot.html">reshaping data like this</a>.
To go from the wide data above to a long dataset:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="tips-for-effective-r-programming.html#cb7-1" aria-hidden="true" tabindex="-1"></a>wide <span class="sc">%&gt;%</span></span>
<span id="cb7-2"><a href="tips-for-effective-r-programming.html#cb7-2" aria-hidden="true" tabindex="-1"></a>    tidyr<span class="sc">::</span><span class="fu">pivot_longer</span>(</span>
<span id="cb7-3"><a href="tips-for-effective-r-programming.html#cb7-3" aria-hidden="true" tabindex="-1"></a>        <span class="at">cols =</span> Drinking_T1<span class="sc">:</span>AnxietyTotal_T2,</span>
<span id="cb7-4"><a href="tips-for-effective-r-programming.html#cb7-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">names_to =</span> <span class="fu">c</span>(<span class="st">&quot;.value&quot;</span>, <span class="st">&quot;Time&quot;</span>),</span>
<span id="cb7-5"><a href="tips-for-effective-r-programming.html#cb7-5" aria-hidden="true" tabindex="-1"></a>        <span class="at">names_sep =</span> <span class="st">&quot;_&quot;</span></span>
<span id="cb7-6"><a href="tips-for-effective-r-programming.html#cb7-6" aria-hidden="true" tabindex="-1"></a>    )</span></code></pre></div>
<p>This can get more complicated if the columns haven’t been
named consistently, or have multiple pieces of info
stored in the name (e.g. <code>t1_male_mean</code>)</p>
<div class="note">
<p>
At the time of writing, the <code>pivot</code> functions were still in beta, but should be in the new <code>tidyr</code> version shortly.
</p>
</div>
</div>
</div>
<div id="writing-readable-code" class="section level2 hasAnchor" number="2.4">
<h2><span class="header-section-number">2.4</span> Writing readable code<a href="tips-for-effective-r-programming.html#writing-readable-code" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>There are two very good reasons to try to write your code in
a clear, understandable way:</p>
<ul>
<li>Other people might need to use your code.</li>
<li>You might need to use your code, a few weeks/months/years
after you’ve written it.</li>
</ul>
<p>It’s possible to write R code that “works” perfectly, and
produces all the results and output you want, but proves
very difficult to make changes to when you have to come back
to it (because a reviewer asked for one additional analysis, etc.)</p>
<div id="basic-formatting-tips" class="section level3 hasAnchor" number="2.4.1">
<h3><span class="header-section-number">2.4.1</span> Basic formatting tips<a href="tips-for-effective-r-programming.html#basic-formatting-tips" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>You can improve the readability of your code a lot by following
a few simple rules:</p>
<ul>
<li>Put spaces between and around variable names and operators (<code>=+-*/</code>)</li>
<li>Break up long lines of code</li>
<li>Use meaningful variable names composed of 2 or 3 words (avoid abbreviations
unless they’re very common and you use them very consistently)</li>
</ul>
<p>These rules can mean the difference between this:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="tips-for-effective-r-programming.html#cb8-1" aria-hidden="true" tabindex="-1"></a>lm1<span class="ot">=</span><span class="fu">lm</span>(y<span class="sc">~</span>grp<span class="sc">+</span>grpTime,mydf,<span class="at">subset=</span>sext1<span class="sc">==</span><span class="st">&quot;m&quot;</span>)</span></code></pre></div>
<p>and this:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="tips-for-effective-r-programming.html#cb9-1" aria-hidden="true" tabindex="-1"></a>male_difference <span class="ot">=</span> <span class="fu">lm</span>(DepressionScore <span class="sc">~</span> Group <span class="sc">+</span> GroupTimeInteraction,</span>
<span id="cb9-2"><a href="tips-for-effective-r-programming.html#cb9-2" aria-hidden="true" tabindex="-1"></a>                     <span class="at">data =</span> interview_data,</span>
<span id="cb9-3"><a href="tips-for-effective-r-programming.html#cb9-3" aria-hidden="true" tabindex="-1"></a>                     <span class="at">subset =</span> BaselineSex <span class="sc">==</span> <span class="st">&quot;Male&quot;</span>)</span></code></pre></div>
<p>R will treat both pieces of code exactly the same, but for any humans reading,
the nicer layout and meaningful names make it much easier to understand
what’s happening, and spot any errors in syntax or intent.</p>
</div>
<div id="keeping-a-consistent-style" class="section level3 hasAnchor" number="2.4.2">
<h3><span class="header-section-number">2.4.2</span> Keeping a consistent style<a href="tips-for-effective-r-programming.html#keeping-a-consistent-style" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Try to follow a consistent style for naming things, e.g. using <code>snake_case</code>
for all your variable names in your R code, and <code>TitleCase</code> for the
columns in your data. Either style is probably better than lowercase with
no spacing <code>allmashedtogether</code>.</p>
<p>It doesn’t particularly matter what that style is, as long as you’re
consistent. There is a <a href="https://style.tidyverse.org/">suggested style guide for the tidyverse</a>,
but I don’t follow it 100%, I just try to be consistent within my code.</p>
</div>
<div id="writing-comments" class="section level3 hasAnchor" number="2.4.3">
<h3><span class="header-section-number">2.4.3</span> Writing comments<a href="tips-for-effective-r-programming.html#writing-comments" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>One of the best things you can do to make R code readable and
understandable is write comments - R ignores lines that start with
<code>#</code> so you can write whatever you want and it won’t affect
the way your code runs.</p>
<p>Comments that explain <em>why</em> something was done are great:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="tips-for-effective-r-programming.html#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Need to reverse code the score for question 3</span></span>
<span id="cb10-2"><a href="tips-for-effective-r-programming.html#cb10-2" aria-hidden="true" tabindex="-1"></a>data<span class="sc">$</span>DepressionQ3 <span class="ot">=</span> <span class="dv">4</span> <span class="sc">-</span> data<span class="sc">$</span>DepressionQ3</span></code></pre></div>
<p>Comments that explain <em>what</em> is being done are less useful. People
who already understand R code should be able to tell what is
happening just by looking at your code (especially if you’re following
the other advice about writing readable code), so these comments
can be redundant:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="tips-for-effective-r-programming.html#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate the mean of the anxiety scores</span></span>
<span id="cb11-2"><a href="tips-for-effective-r-programming.html#cb11-2" aria-hidden="true" tabindex="-1"></a>anxiety_mean <span class="ot">=</span> <span class="fu">mean</span>(data<span class="sc">$</span>AnxietyTotal)</span></code></pre></div>
<p>The exception to this is when you’ve run into something that
was tricky to get working, and you need to explain it so other
people don’t run into the same issue:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="tips-for-effective-r-programming.html#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># (Example only, do not run)</span></span>
<span id="cb12-2"><a href="tips-for-effective-r-programming.html#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="co"># This fails to converge if we don&#39;t set the fix_missing option</span></span>
<span id="cb12-3"><a href="tips-for-effective-r-programming.html#cb12-3" aria-hidden="true" tabindex="-1"></a>drinking_model <span class="ot">=</span> <span class="fu">logit_regression</span>(Drink <span class="sc">~</span> Group, <span class="at">fix_missing=</span><span class="cn">TRUE</span>)</span></code></pre></div>
</div>
</div>
<div id="dont-panic-dealing-with-spss-withdrawal" class="section level2 hasAnchor" number="2.5">
<h2><span class="header-section-number">2.5</span> Don’t panic: dealing with SPSS withdrawal<a href="tips-for-effective-r-programming.html#dont-panic-dealing-with-spss-withdrawal" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="rstudio-has-a-data-viewer" class="section level3 hasAnchor" number="2.5.1">
<h3><span class="header-section-number">2.5.1</span> RStudio has a data viewer<a href="tips-for-effective-r-programming.html#rstudio-has-a-data-viewer" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>As you get used to R, you should find that you get more comfortable
using the console to check on your data. You can often see
a lot of the information you need by printing the first few
rows of a dataset to the console. The <code>head()</code> function prints
the first 6 rows of a table by default, and you can select the columns that
are most relevant to what you’re working on if there are too many:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="tips-for-effective-r-programming.html#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(iris[, <span class="fu">c</span>(<span class="st">&quot;Species&quot;</span>, <span class="st">&quot;Petal.Length&quot;</span>)])</span></code></pre></div>
<pre><code>##   Species Petal.Length
## 1  setosa          1.4
## 2  setosa          1.4
## 3  setosa          1.3
## 4  setosa          1.5
## 5  setosa          1.4
## 6  setosa          1.7</code></pre>
<p>However, you can also use RStudio’s built-in data viewer to get a more
familiar, spreadsheet style view of your data. In the <strong>Environment</strong>
pane in the top-right, you can click on the name of any data you
have loaded to bring up a spreadsheet view:</p>
<div class="figure">
<img src="Images/RstudioDataViewer.png" alt="" />
<p class="caption">Data viewer example</p>
</div>
<p>This also supports basic sorting and filtering so you can explore
the data more easily (you’ll still need to write code using functions
like <code>arrange()</code> or <code>filter()</code> if you want to actually make
changes to the data though).</p>
</div>
<div id="r-can-read-spss-files" class="section level3 hasAnchor" number="2.5.2">
<h3><span class="header-section-number">2.5.2</span> R can read SPSS files<a href="tips-for-effective-r-programming.html#r-can-read-spss-files" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The <code>haven</code> package can read (and write) SPSS data files, so you
can read in existing data:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="tips-for-effective-r-programming.html#cb15-1" aria-hidden="true" tabindex="-1"></a>survey_one <span class="ot">=</span> haven<span class="sc">::</span><span class="fu">read_spss</span>(<span class="st">&quot;Data/Survey1_Final.sav&quot;</span>)</span></code></pre></div>
<p>R doesn’t deal with “value labels” in the same way as SPSS, and
<code>haven</code> tries to keep information about the SPSS value labels available.
However, it’s best to just convert everything to R’s way of dealing with
categorical variables, i.e. factors, using <code>haven</code>’s <code>as_factor()</code> function:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="tips-for-effective-r-programming.html#cb16-1" aria-hidden="true" tabindex="-1"></a>survey_one <span class="ot">=</span> haven<span class="sc">::</span><span class="fu">as_factor</span>(survey_one, <span class="at">levels =</span> <span class="st">&quot;both&quot;</span>)</span></code></pre></div>
<p>The <code>levels = "both"</code> option puts both the numeric value and the text label
into the factor labels, like <code>"[0] No"</code>, <code>"[1] Yes"</code>. As you get more
comfortable with R you may want to just use <code>levels = "labels"</code> so you
just get the text labels like <code>"No"</code>, <code>"Yes"</code>.</p>
<p>You may need to convert your data <a href="tips-for-effective-r-programming.html#wide-to-long">from wide to long</a>, since
SPSS prefers wide and R prefers long.</p>
<p>The <code>haven</code> package can also read SAS and Stata data, and there are
packages like <code>readxl</code> for Excel files. It’s generally easy to read
your data into R from any format designed for tables of data.</p>
</div>
</div>
<div id="here-be-dragons-the-bad-parts-of-r" class="section level2 hasAnchor" number="2.6">
<h2><span class="header-section-number">2.6</span> Here be dragons: the bad parts of R<a href="tips-for-effective-r-programming.html#here-be-dragons-the-bad-parts-of-r" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>There are a few tools in R that tend to create more problems
than they solve. Unfortunately beginners often end up using
them (sometimes because bad tutorials recommend them). My
personal list of tools to <strong>avoid</strong> includes:</p>
<ul>
<li><code>attach()</code>: This copies all the individual variables from a dataset
into R’s environment, so you can access them with just <code>var_name</code>
instead of <code>dataset$var_name</code>. The problem is:
<ul>
<li>You end up with <em>a lot</em> of variables in your environment that are
hard to keep track of.</li>
<li>The variables can get out of sync with each other in ways
that wouldn’t be possible if they were kept in the dataset.</li>
</ul></li>
<li><code>get()</code> and <code>assign()</code>: These allow you to look up and create variable
names using strings, so instead of looking up <code>model3</code>, you can
programmatically create the variable name like
<code>get(paste0("model", model_num))</code>.
<ul>
<li>Again, you can end up with <em>a lot</em> of variables in your environment.</li>
<li>People often use these when they want to run 100 different versions
of a model (there are sometimes good reasons to do this). Instead of creating
100 different variables called <code>model1</code>, <code>model2</code>, …, <code>model100</code>, it’s
usually possible to save these in a single <code>list</code> or dataframe. Saving
them all in a list means it’s much easier to process and work
with the results.</li>
</ul></li>
</ul>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="installing.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="the-basics-of-r.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/Hi-Vis/Marius_edits2/02-tips.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
